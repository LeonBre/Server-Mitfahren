<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">

    <title>Drive</title>
    <meta name="description" content="Drive Details">
    <meta name="author" content="Leon Johann Brettin">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/css/materialize.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <link rel="stylesheet" href="css/master.css" media="screen" title="no title" charset="utf-8">

    <!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>

    <nav>
      <div class="nav-wrapper teal lighten-2">
        <a href="#" class="brand-logo">Mitfahren</a>
        <ul id="nav-mobile" class="right hide-on-med-and-down">
          <li><a href="sass.html">Sass</a></li>
          <li><a href="badges.html">Components</a></li>
          <li><a href="collapsible.html">JavaScript</a></li>
        </ul>
      </div>
    </nav>
    <!--
    <h2 class="header noDrive teal-text">Keine passende Fahrt gefunden.</h2>
    -->
    <div class="driveContent">
      <div class="row">
          <div class="col l3 m6">
            <h3 class="header">Braunschweig</h3>
          </div>
          <div class="col l3 m6">
            <h3 class="header">Hannover</h3>
          </div>
          <div class="col l3 m6">
            <h3 class="header">20.8.2016</h3>
          </div>
          <div class="col l3 m6">
            <h3 class="header">15:30</h3>
          </div>
      </div>
      <div class="row">

      </div>
    </div>


    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/js/materialize.min.js"></script>
    <script type="text/javascript">
    var destinationURL = "http://localhost:8080"

    $(document).ready(function() {
        var urlVarDriveId = getUrlVars()['driveId'];
        if(urlVarDriveId != null) {
          requestData(urlVarDriveId)
        }



    });

    function requestData(urlVarDriveId) {
      var data = {
        driveId : urlVarDriveId
      }

      data = JSON.stringify(data);
      $.ajax({
        type: 'POST',
        url: destinationURL + '/Server-Mitfahren/apiv1/driveDetails',
        contentType: "application/json",
        data: data,
        success: function(answer) {
          console.log("From Server: ", JSON.stringify(answer))
        },
        error: function() {
          console.log("Error");
        }
      });
    }

    function getUrlVars() {
        var vars = [], hash;
        var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
        for(var i = 0; i < hashes.length; i++)
        {
            hash = hashes[i].split('=');
            vars.push(hash[0]);
            vars[hash[0]] = hash[1];
        }
        return vars;
      }

      console.log(getUrlVars());
    </script>
  </body>
</html>
